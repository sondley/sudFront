{"ast":null,"code":"import _objectSpread from \"/Users/sondley/Desktop/PapaRohenson/grandsud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport api from \"../../api\";\nimport Cookie from \"react-cookies\";\nimport decode from \"jwt-decode\";\nimport { endNavigation } from \"./navigate\";\nexport var LOGOUT = \"LOGOUT\";\nexport var LOGIN = \"LOGIN\";\nexport var LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport var LOGIN_FAIL = \"LOGIN_FAIL\";\nexport var LOGGED_USER = \"LOGGED_USER\";\nexport var LOGGED_USER_SUCCESS = \"LOGGED_USER_SUCCESS\";\nexport var LOGGED_USER_FAIL = \"LOGGED_USER_FAIL\";\nexport var REFRESH_TOKEN = \"REFRESH_TOKEN\";\nexport var REFRESH_TOKEN_SUCCESS = \"REFRESH_TOKEN_SUCCESS\";\nexport var REFRESH_TOKEN_FAIL = \"REFRESH_TOKEN_FAIL\";\nexport var GET_USERS = \"GET_USERS\";\nexport var GET_USERS_SUCCESS = \"GET_USERS_SUCCESS\";\nexport var GET_USERS_FAIL = \"GET_USERS_FAIL\";\nexport var CREATE_USER = \"CREATE_USER\";\nexport var CREATE_USER_SUCCESS = \"CREATE_USER_SUCCESS\";\nexport var CREATE_USER_FAIL = \"CREATE_USER_FAIL\";\nexport var MODIFY_USER = \"MODIFY_USER\";\nexport var MODIFY_USER_SUCCESS = \"MODIFY_USER_SUCCESS\";\nexport var MODIFY_USER_FAIL = \"MODIFY_USER_FAIL\";\nexport var DELETE_USER = \"DELETE_USER\";\nexport var DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport var DELETE_USER_FAIL = \"DELETE_USER_FAIL\";\n\nfunction requestBegin(type) {\n  return {\n    type: type\n  };\n}\n\nfunction requestSuccess(type, user, message, token) {\n  return {\n    type: type,\n    payload: {\n      user: user,\n      message: message,\n      token: token\n    }\n  };\n}\n\nfunction requestFail(type, message) {\n  return {\n    type: type,\n    payload: {\n      message: message\n    }\n  };\n}\n\nfunction requestSuccessWithNavTree(type, user, message, token, navTree) {\n  return {\n    type: type,\n    payload: {\n      user: user,\n      message: message,\n      token: token,\n      navTree: navTree\n    }\n  };\n}\n\nexport function logout() {\n  return function (dispatch) {\n    Cookie.remove(\"sessionCookie\");\n    return dispatch(requestBegin(LOGOUT));\n  };\n}\nexport function login(username, password, rememberMe) {\n  return function (dispatch) {\n    dispatch(requestBegin(LOGIN));\n    return api.requestPOST(\"/authenticate\", {\n      email: username,\n      motDePasse: password\n    }).then(function (objResponse) {\n      if (objResponse.data.success) {\n        var _objResponse$data$dat = objResponse.data.data,\n            user = _objResponse$data$dat.user,\n            token = _objResponse$data$dat.token;\n        var Options = [];\n\n        switch (user.role) {\n          case \"vendeur\":\n            Options = [{\n              name: \"/orders\",\n              icon: \"clipboard list\",\n              label: \"Commande\",\n              index: 0\n            }, {\n              name: \"/products\",\n              icon: \"box\",\n              label: \"Produits\",\n              index: 1\n            }, {\n              name: \"/vendor_reports\",\n              icon: \"chart bar outline\",\n              label: \"Rapports\",\n              index: 2\n            }];\n            break;\n\n          case \"caissier\":\n            Options = [{\n              name: \"/validate_solicitude\",\n              icon: \"check square\",\n              label: \"Valider Solicitude\",\n              index: 0\n            }, {\n              name: \"/validate_order\",\n              icon: \"clipboard check\",\n              label: \"Valider Commande\",\n              index: 1\n            }, {\n              name: \"/payment\",\n              icon: \"payment\",\n              label: \"Realiser Paiement\",\n              index: 2\n            }, {\n              name: \"/view_transactions\",\n              icon: \"handshake outline\",\n              label: \"Voir Transactions\",\n              index: 3\n            }];\n            break;\n\n          case \"directeur\":\n            Options = [{\n              name: \"/director_reports\",\n              icon: \"chart line\",\n              label: \"Rapports\",\n              index: 0\n            }, {\n              name: \"/users\",\n              icon: \"users\",\n              label: \"Utilisateurs\",\n              index: 1\n            }, {\n              name: \"/salary\",\n              icon: \"money bill alternate outline\",\n              label: \"Augmenter le Salaire\",\n              index: 2\n            }, {\n              name: \"/cash_status\",\n              icon: \"money\",\n              label: \"Etat du Compte\",\n              index: 3\n            }, {\n              name: \"/buys\",\n              icon: \"cart\",\n              label: \"Reviser Achats\",\n              index: 4\n            }, {\n              name: \"/sales\",\n              icon: \"tags\",\n              label: \"Reviser Ventes\",\n              index: 5\n            }, {\n              name: \"/solicitude\",\n              icon: \"hand lizard outline\",\n              label: \"Solicitude\",\n              index: 6\n            }, {\n              name: \"/warehouse\",\n              icon: \"archive\",\n              label: \"Stock\",\n              index: 7\n            }, {\n              name: \"/comite_monitor\",\n              icon: \"sign-in\",\n              label: \"Rentrez de Comite\",\n              index: 8\n            }];\n            break;\n\n          case \"comite\":\n            Options = [{\n              name: \"/benefits_reports\",\n              icon: \"chart area\",\n              label: \"Rapports du Benefices\",\n              index: 0\n            }, {\n              name: \"/banking_reports\",\n              icon: \"chart line\",\n              label: \"Rapports du Banque\",\n              index: 1\n            }, {\n              name: \"/solicitude_reports\",\n              icon: \"chart bar\",\n              label: \"Rapports de Solicitude\",\n              index: 2\n            }];\n            break;\n\n          case \"contable\":\n            Options = [{\n              name: \"/cash_status\",\n              icon: \"money\",\n              label: \"Etat du Compte\",\n              index: 0\n            }, {\n              name: \"/buys\",\n              icon: \"cart\",\n              label: \"Achats\",\n              index: 1\n            }, {\n              name: \"/sales\",\n              icon: \"tags\",\n              label: \"Ventes\",\n              index: 2\n            }, {\n              name: \"/banking\",\n              icon: \"lock\",\n              label: \"Banque\",\n              index: 3\n            }, {\n              name: \"/accounting_reports\",\n              icon: \"chart bar outline\",\n              label: \"Rapports\",\n              index: 4\n            }];\n            break;\n\n          case \"assistance\":\n            Options = [{\n              name: \"/warehouse\",\n              icon: \"archive\",\n              label: \"Stock\",\n              index: 0\n            }, {\n              name: \"/suppliers\",\n              icon: \"users\",\n              label: \"Fournisseurs\",\n              index: 1\n            }, {\n              name: \"/buys\",\n              icon: \"cart\",\n              label: \"Reviser Achats\",\n              index: 2\n            }, {\n              name: \"/assistance_reports\",\n              icon: \"chart bar outline\",\n              label: \"Rapports\",\n              index: 3\n            }];\n            break;\n        }\n\n        var data = {\n          user: user,\n          token: token,\n          Options: Options\n        };\n        Cookie.save(\"sessionCookie\", data, {\n          path: \"/\",\n          maxAge: 3600\n        });\n\n        if (rememberMe === true) {\n          var preferences = {\n            email: username,\n            rememberMe: rememberMe\n          };\n          Cookie.save(\"userPreferences\", preferences, {\n            path: \"/\"\n          });\n        } else {\n          Cookie.remove(\"userPreferences\");\n        }\n\n        dispatch(requestSuccessWithNavTree(LOGIN_SUCCESS, user, objResponse.data.message, token, Options));\n        api.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + token;\n        dispatch(endNavigation());\n      } else {\n        dispatch(requestFail(LOGIN_FAIL, objResponse.data.message));\n      }\n    }).catch(function (objError) {\n      dispatch(requestFail(LOGIN_FAIL, objError));\n    });\n  };\n}\nexport function checkSession() {\n  return function (dispatch) {\n    dispatch(requestBegin(LOGGED_USER));\n    var data = Cookie.load(\"sessionCookie\");\n\n    if (data !== undefined) {\n      var user = data.user,\n          token = data.token,\n          Options = data.Options;\n      var decodedToken = decode(token);\n      var tokenExpiration = decodedToken.exp;\n      var currentTime = Math.floor(new Date().getTime() / 1000.0);\n      var remainingTime = tokenExpiration - currentTime;\n      Cookie.save(\"sessionCookie\", data, {\n        path: \"/\",\n        maxAge: remainingTime\n      });\n      dispatch(requestSuccessWithNavTree(LOGGED_USER_SUCCESS, user, \"Session Open\", token, Options));\n      api.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + token;\n    } else {\n      dispatch(requestFail(LOGGED_USER_FAIL, \"No Session\"));\n    }\n  };\n}\nexport function resetToken() {\n  return function (dispatch) {\n    dispatch(requestBegin(REFRESH_TOKEN));\n    return api.requestGET(\"/resetToken\").then(function (objResponse) {\n      if (objResponse.data.success) {\n        var data = Cookie.load(\"sessionCookie\");\n        data = _objectSpread({}, data, {\n          token: objResponse.data.data.token\n        });\n        Cookie.save(\"sessionCookie\", data, {\n          path: \"/\",\n          maxAge: 3600\n        });\n        dispatch(requestSuccess(REFRESH_TOKEN_SUCCESS, null, objResponse.data.message, objResponse.data.data.token));\n        api.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + objResponse.data.data.token;\n      } else {\n        dispatch(requestFail(REFRESH_TOKEN_FAIL, objResponse.data.message));\n      }\n    }).catch(function (objError) {\n      dispatch(requestFail(REFRESH_TOKEN_FAIL, objError.response.data.message));\n    });\n  };\n} // export function getUsers() {\n//   return dispatch => {\n//     dispatch(getUsersBegin());\n//     return api\n//       .requestGET(\"/usuarios\")\n//       .then(objResponse => {\n//         dispatch(getUsersSuccess(objResponse.data.results));\n//       })\n//       .catch(objError => {\n//         dispatch(getUsersFail(objError));\n//       });\n//   };\n// }\n// export function createUser(user, onClose) {\n//   return dispatch => {\n//     dispatch(createUserBegin());\n//     return api\n//       .requestPOST(\"/usuarios\", {\n//         nombres: user.nombres,\n//         appelidos: user.appelidos,\n//         cedula: user.cedula,\n//         telefono: user.telefono,\n//         direccion: user.direccion,\n//         usuario: user.usuario,\n//         correo: user.correo,\n//         password: user.password\n//       })\n//       .then(objResponse => {\n//         dispatch(createUserSuccess(objResponse.data));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(createUserFail(objError));\n//       });\n//   };\n// }\n// export function modifyUser(user, onClose) {\n//   return dispatch => {\n//     dispatch(modifyUserBegin());\n//     return api\n//       .requestPUT(`/usuarios/${user.id}`, {\n//         nombres: user.nombres,\n//         appelidos: user.appelidos,\n//         cedula: user.cedula,\n//         telefono: user.telefono,\n//         direccion: user.direccion,\n//         usuario: user.usuario,\n//         correo: user.correo,\n//         password: user.password\n//       })\n//       .then(objResponse => {\n//         console.log(objResponse);\n//         dispatch(modifyUserSuccess(user));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(modifyUserFail(objError));\n//       });\n//   };\n// }\n// export function deleteUser(id, onClose) {\n//   return dispatch => {\n//     dispatch(deleteUserBegin());\n//     return api\n//       .requestDELETE(`/usuarios/${id.id}`)\n//       .then(objResponse => {\n//         console.log(objResponse);\n//         dispatch(deleteUserSuccess(id.id));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(deleteUserFail(objError));\n//       });\n//   };\n// }","map":{"version":3,"sources":["/Users/sondley/Desktop/PapaRohenson/grandsud/src/redux/actions/user.js"],"names":["api","Cookie","decode","endNavigation","LOGOUT","LOGIN","LOGIN_SUCCESS","LOGIN_FAIL","LOGGED_USER","LOGGED_USER_SUCCESS","LOGGED_USER_FAIL","REFRESH_TOKEN","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAIL","GET_USERS","GET_USERS_SUCCESS","GET_USERS_FAIL","CREATE_USER","CREATE_USER_SUCCESS","CREATE_USER_FAIL","MODIFY_USER","MODIFY_USER_SUCCESS","MODIFY_USER_FAIL","DELETE_USER","DELETE_USER_SUCCESS","DELETE_USER_FAIL","requestBegin","type","requestSuccess","user","message","token","payload","requestFail","requestSuccessWithNavTree","navTree","logout","dispatch","remove","login","username","password","rememberMe","requestPOST","email","motDePasse","then","objResponse","data","success","Options","role","name","icon","label","index","save","path","maxAge","preferences","defaults","headers","common","catch","objError","checkSession","load","undefined","decodedToken","tokenExpiration","exp","currentTime","Math","floor","Date","getTime","remainingTime","resetToken","requestGET","response"],"mappings":"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","sourcesContent":["import api from \"../../api\";\nimport Cookie from \"react-cookies\";\nimport decode from \"jwt-decode\";\nimport { endNavigation } from \"./navigate\";\n\nexport const LOGOUT = \"LOGOUT\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAIL = \"LOGIN_FAIL\";\nexport const LOGGED_USER = \"LOGGED_USER\";\nexport const LOGGED_USER_SUCCESS = \"LOGGED_USER_SUCCESS\";\nexport const LOGGED_USER_FAIL = \"LOGGED_USER_FAIL\";\nexport const REFRESH_TOKEN = \"REFRESH_TOKEN\";\nexport const REFRESH_TOKEN_SUCCESS = \"REFRESH_TOKEN_SUCCESS\";\nexport const REFRESH_TOKEN_FAIL = \"REFRESH_TOKEN_FAIL\";\n\nexport const GET_USERS = \"GET_USERS\";\nexport const GET_USERS_SUCCESS = \"GET_USERS_SUCCESS\";\nexport const GET_USERS_FAIL = \"GET_USERS_FAIL\";\nexport const CREATE_USER = \"CREATE_USER\";\nexport const CREATE_USER_SUCCESS = \"CREATE_USER_SUCCESS\";\nexport const CREATE_USER_FAIL = \"CREATE_USER_FAIL\";\nexport const MODIFY_USER = \"MODIFY_USER\";\nexport const MODIFY_USER_SUCCESS = \"MODIFY_USER_SUCCESS\";\nexport const MODIFY_USER_FAIL = \"MODIFY_USER_FAIL\";\nexport const DELETE_USER = \"DELETE_USER\";\nexport const DELETE_USER_SUCCESS = \"DELETE_USER_SUCCESS\";\nexport const DELETE_USER_FAIL = \"DELETE_USER_FAIL\";\n\nfunction requestBegin(type) {\n\treturn { type };\n}\n\nfunction requestSuccess(type, user, message, token) {\n\treturn { type, payload: { user, message, token } };\n}\n\nfunction requestFail(type, message) {\n\treturn { type, payload: { message } };\n}\n\nfunction requestSuccessWithNavTree(type, user, message, token, navTree) {\n\treturn { type, payload: { user, message, token, navTree } };\n}\n\nexport function logout() {\n\treturn dispatch => {\n\t\tCookie.remove(\"sessionCookie\");\n\t\treturn dispatch(requestBegin(LOGOUT));\n\t};\n}\n\nexport function login(username, password, rememberMe) {\n\treturn dispatch => {\n\t\tdispatch(requestBegin(LOGIN));\n\t\treturn api\n\t\t\t.requestPOST(\"/authenticate\", {\n\t\t\t\temail: username,\n\t\t\t\tmotDePasse: password\n\t\t\t})\n\t\t\t.then(objResponse => {\n\t\t\t\tif (objResponse.data.success) {\n\t\t\t\t\tconst { user, token } = objResponse.data.data;\n\t\t\t\t\tlet Options = [];\n\t\t\t\t\tswitch (user.role) {\n\t\t\t\t\t\tcase \"vendeur\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/orders\",\n\t\t\t\t\t\t\t\t\ticon: \"clipboard list\",\n\t\t\t\t\t\t\t\t\tlabel: \"Commande\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/products\",\n\t\t\t\t\t\t\t\t\ticon: \"box\",\n\t\t\t\t\t\t\t\t\tlabel: \"Produits\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/vendor_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart bar outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"caissier\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/validate_solicitude\",\n\t\t\t\t\t\t\t\t\ticon: \"check square\",\n\t\t\t\t\t\t\t\t\tlabel: \"Valider Solicitude\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/validate_order\",\n\t\t\t\t\t\t\t\t\ticon: \"clipboard check\",\n\t\t\t\t\t\t\t\t\tlabel: \"Valider Commande\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/payment\",\n\t\t\t\t\t\t\t\t\ticon: \"payment\",\n\t\t\t\t\t\t\t\t\tlabel: \"Realiser Paiement\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/view_transactions\",\n\t\t\t\t\t\t\t\t\ticon: \"handshake outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Voir Transactions\",\n\t\t\t\t\t\t\t\t\tindex: 3\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"directeur\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/director_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart line\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/users\",\n\t\t\t\t\t\t\t\t\ticon: \"users\",\n\t\t\t\t\t\t\t\t\tlabel: \"Utilisateurs\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/salary\",\n\t\t\t\t\t\t\t\t\ticon: \"money bill alternate outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Augmenter le Salaire\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/cash_status\",\n\t\t\t\t\t\t\t\t\ticon: \"money\",\n\t\t\t\t\t\t\t\t\tlabel: \"Etat du Compte\",\n\t\t\t\t\t\t\t\t\tindex: 3\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/buys\",\n\t\t\t\t\t\t\t\t\ticon: \"cart\",\n\t\t\t\t\t\t\t\t\tlabel: \"Reviser Achats\",\n\t\t\t\t\t\t\t\t\tindex: 4\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/sales\",\n\t\t\t\t\t\t\t\t\ticon: \"tags\",\n\t\t\t\t\t\t\t\t\tlabel: \"Reviser Ventes\",\n\t\t\t\t\t\t\t\t\tindex: 5\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/solicitude\",\n\t\t\t\t\t\t\t\t\ticon: \"hand lizard outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Solicitude\",\n\t\t\t\t\t\t\t\t\tindex: 6\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/warehouse\",\n\t\t\t\t\t\t\t\t\ticon: \"archive\",\n\t\t\t\t\t\t\t\t\tlabel: \"Stock\",\n\t\t\t\t\t\t\t\t\tindex: 7\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/comite_monitor\",\n\t\t\t\t\t\t\t\t\ticon: \"sign-in\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rentrez de Comite\",\n\t\t\t\t\t\t\t\t\tindex: 8\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"comite\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/benefits_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart area\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports du Benefices\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/banking_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart line\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports du Banque\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/solicitude_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart bar\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports de Solicitude\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"contable\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/cash_status\",\n\t\t\t\t\t\t\t\t\ticon: \"money\",\n\t\t\t\t\t\t\t\t\tlabel: \"Etat du Compte\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/buys\",\n\t\t\t\t\t\t\t\t\ticon: \"cart\",\n\t\t\t\t\t\t\t\t\tlabel: \"Achats\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/sales\",\n\t\t\t\t\t\t\t\t\ticon: \"tags\",\n\t\t\t\t\t\t\t\t\tlabel: \"Ventes\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/banking\",\n\t\t\t\t\t\t\t\t\ticon: \"lock\",\n\t\t\t\t\t\t\t\t\tlabel: \"Banque\",\n\t\t\t\t\t\t\t\t\tindex: 3\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/accounting_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart bar outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports\",\n\t\t\t\t\t\t\t\t\tindex: 4\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"assistance\":\n\t\t\t\t\t\t\tOptions = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/warehouse\",\n\t\t\t\t\t\t\t\t\ticon: \"archive\",\n\t\t\t\t\t\t\t\t\tlabel: \"Stock\",\n\t\t\t\t\t\t\t\t\tindex: 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/suppliers\",\n\t\t\t\t\t\t\t\t\ticon: \"users\",\n\t\t\t\t\t\t\t\t\tlabel: \"Fournisseurs\",\n\t\t\t\t\t\t\t\t\tindex: 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/buys\",\n\t\t\t\t\t\t\t\t\ticon: \"cart\",\n\t\t\t\t\t\t\t\t\tlabel: \"Reviser Achats\",\n\t\t\t\t\t\t\t\t\tindex: 2\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"/assistance_reports\",\n\t\t\t\t\t\t\t\t\ticon: \"chart bar outline\",\n\t\t\t\t\t\t\t\t\tlabel: \"Rapports\",\n\t\t\t\t\t\t\t\t\tindex: 3\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst data = { user, token, Options };\n\t\t\t\t\tCookie.save(\"sessionCookie\", data, { path: \"/\", maxAge: 3600 });\n\t\t\t\t\tif (rememberMe === true) {\n\t\t\t\t\t\tconst preferences = { email: username, rememberMe };\n\t\t\t\t\t\tCookie.save(\"userPreferences\", preferences, { path: \"/\" });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tCookie.remove(\"userPreferences\");\n\t\t\t\t\t}\n\t\t\t\t\tdispatch(requestSuccessWithNavTree(LOGIN_SUCCESS, user, objResponse.data.message, token, Options));\n\t\t\t\t\tapi.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + token;\n\t\t\t\t\tdispatch(endNavigation());\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(requestFail(LOGIN_FAIL, objResponse.data.message));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(objError => {\n\t\t\t\tdispatch(requestFail(LOGIN_FAIL, objError));\n\t\t\t});\n\t};\n}\n\nexport function checkSession() {\n\treturn dispatch => {\n\t\tdispatch(requestBegin(LOGGED_USER));\n\t\tlet data = Cookie.load(\"sessionCookie\");\n\t\tif (data !== undefined) {\n\t\t\tconst { user, token, Options } = data;\n\t\t\tconst decodedToken = decode(token);\n\t\t\tconst tokenExpiration = decodedToken.exp;\n\t\t\tconst currentTime = Math.floor(new Date().getTime() / 1000.0);\n\t\t\tconst remainingTime = tokenExpiration - currentTime;\n\t\t\tCookie.save(\"sessionCookie\", data, {\n\t\t\t\tpath: \"/\",\n\t\t\t\tmaxAge: remainingTime\n\t\t\t});\n\t\t\tdispatch(requestSuccessWithNavTree(LOGGED_USER_SUCCESS, user, \"Session Open\", token, Options));\n\t\t\tapi.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + token;\n\t\t} else {\n\t\t\tdispatch(requestFail(LOGGED_USER_FAIL, \"No Session\"));\n\t\t}\n\t};\n}\n\nexport function resetToken() {\n\treturn dispatch => {\n\t\tdispatch(requestBegin(REFRESH_TOKEN));\n\t\treturn api\n\t\t\t.requestGET(\"/resetToken\")\n\t\t\t.then(objResponse => {\n\t\t\t\tif (objResponse.data.success) {\n\t\t\t\t\tlet data = Cookie.load(\"sessionCookie\");\n\t\t\t\t\tdata = { ...data, token: objResponse.data.data.token };\n\t\t\t\t\tCookie.save(\"sessionCookie\", data, { path: \"/\", maxAge: 3600 });\n\t\t\t\t\tdispatch(requestSuccess(REFRESH_TOKEN_SUCCESS, null, objResponse.data.message, objResponse.data.data.token));\n\t\t\t\t\tapi.api.defaults.headers.common[\"Authorization\"] = \"bearer \" + objResponse.data.data.token;\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(requestFail(REFRESH_TOKEN_FAIL, objResponse.data.message));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(objError => {\n\t\t\t\tdispatch(requestFail(REFRESH_TOKEN_FAIL, objError.response.data.message));\n\t\t\t});\n\t};\n}\n\n// export function getUsers() {\n//   return dispatch => {\n//     dispatch(getUsersBegin());\n//     return api\n//       .requestGET(\"/usuarios\")\n//       .then(objResponse => {\n//         dispatch(getUsersSuccess(objResponse.data.results));\n//       })\n//       .catch(objError => {\n//         dispatch(getUsersFail(objError));\n//       });\n//   };\n// }\n\n// export function createUser(user, onClose) {\n//   return dispatch => {\n//     dispatch(createUserBegin());\n//     return api\n//       .requestPOST(\"/usuarios\", {\n//         nombres: user.nombres,\n//         appelidos: user.appelidos,\n//         cedula: user.cedula,\n//         telefono: user.telefono,\n//         direccion: user.direccion,\n//         usuario: user.usuario,\n//         correo: user.correo,\n//         password: user.password\n//       })\n//       .then(objResponse => {\n//         dispatch(createUserSuccess(objResponse.data));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(createUserFail(objError));\n//       });\n//   };\n// }\n\n// export function modifyUser(user, onClose) {\n//   return dispatch => {\n//     dispatch(modifyUserBegin());\n//     return api\n//       .requestPUT(`/usuarios/${user.id}`, {\n//         nombres: user.nombres,\n//         appelidos: user.appelidos,\n//         cedula: user.cedula,\n//         telefono: user.telefono,\n//         direccion: user.direccion,\n//         usuario: user.usuario,\n//         correo: user.correo,\n//         password: user.password\n//       })\n//       .then(objResponse => {\n//         console.log(objResponse);\n//         dispatch(modifyUserSuccess(user));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(modifyUserFail(objError));\n//       });\n//   };\n// }\n\n// export function deleteUser(id, onClose) {\n//   return dispatch => {\n//     dispatch(deleteUserBegin());\n//     return api\n//       .requestDELETE(`/usuarios/${id.id}`)\n//       .then(objResponse => {\n//         console.log(objResponse);\n//         dispatch(deleteUserSuccess(id.id));\n//         onClose();\n//       })\n//       .catch(objError => {\n//         dispatch(deleteUserFail(objError));\n//       });\n//   };\n// }\n"]},"metadata":{},"sourceType":"module"}