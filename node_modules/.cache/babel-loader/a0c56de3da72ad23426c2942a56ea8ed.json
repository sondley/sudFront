{"ast":null,"code":"import _toConsumableArray from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sondley/Desktop/PapaRohenson/sudFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sondley/Desktop/PapaRohenson/sudFront/src/components/devolution-form/devolutionform.js\";\nimport React, { PureComponent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Input, Button, Message, Dimmer, Icon, Card, Table } from \"semantic-ui-react\";\nimport { getOrderByNumber, createDevolution, modifyDevolution } from \"../../redux/actions/devolution\";\nimport { isEmpty, find } from \"lodash\"; //Styles\n\nimport styles from \"./devolutionform.module.css\";\n\nvar DevolutionForm =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(DevolutionForm, _PureComponent);\n\n  function DevolutionForm(props) {\n    var _this;\n\n    _classCallCheck(this, DevolutionForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DevolutionForm).call(this, props));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var quantiteList;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this.state.edit || _this.state.view)) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return _this.props.dispatch(getOrderByNumber(_this.props.data.numero));\n\n            case 3:\n              quantiteList = _this.props.data.arrayOrden.map(function (item) {\n                return item.quantite;\n              });\n\n              _this.setState({\n                numero: _this.props.data.numero,\n                client: _this.props.data.client,\n                isRenderable: true,\n                orderList: _this.props.devolution.printOrder.arrayOrden,\n                devolutionList: _this.props.data.arrayOrden,\n                quantiteList: quantiteList\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.handleSearchOrder =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var orderList, quantiteList;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                _context2.next = 3;\n                return _this.props.dispatch(getOrderByNumber(_this.state.numero));\n\n              case 3:\n                orderList = _this.props.devolution.printOrder.arrayOrden;\n                quantiteList = orderList.map(function () {\n                  return 0;\n                });\n\n                _this.setState({\n                  isRenderable: true,\n                  orderList: orderList,\n                  devolutionList: orderList,\n                  quantiteList: quantiteList,\n                  client: _this.props.devolution.printOrder.client\n                });\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleChange = function (event) {\n      event.preventDefault();\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleModalClose = function () {\n      _this.setState({\n        isModalOpen: false\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          devolutionList = _this$state.devolutionList,\n          quantiteList = _this$state.quantiteList;\n\n      if (find(quantiteList, function (x) {\n        return x !== 0;\n      })) {\n        if (_this.state.edit) {\n          var _devolution = _objectSpread({}, _this.props.data, {\n            idRealisateur: _this.props.user.authedUser._id,\n            arrayOrden: devolutionList.map(function (item, index) {\n              return {\n                idproduit: item.idproduit,\n                prixUnite: item.prixUnite,\n                quantite: quantiteList[index]\n              };\n            })\n          });\n\n          return _this.props.dispatch(modifyDevolution(_devolution, _this.props.onClose));\n        }\n\n        var devolution = {\n          numero: _this.state.numero,\n          idRealisateur: _this.props.user.authedUser._id,\n          client: _this.state.client,\n          arrayOrden: devolutionList.map(function (item, index) {\n            return {\n              idproduit: item.idproduit,\n              prixUnite: item.prixUnite,\n              quantite: quantiteList[index]\n            };\n          })\n        };\n\n        _this.props.dispatch(createDevolution(devolution, _this.props.onClose));\n      } else {\n        _this.setState({\n          isModalOpen: true\n        });\n      }\n    };\n\n    _this.handleSubstract = function (e, value, index) {\n      e.preventDefault();\n\n      var newList = _toConsumableArray(_this.state.quantiteList);\n\n      if (newList[index] > 0) {\n        newList[index] = value - 1;\n\n        _this.setState({\n          quantiteList: newList\n        });\n      }\n    };\n\n    _this.handleAdd = function (e, value, index) {\n      e.preventDefault();\n\n      var newList = _toConsumableArray(_this.state.quantiteList);\n\n      if (newList[index] < _this.state.orderList[index].quantite) {\n        newList[index] = value + 1;\n\n        _this.setState({\n          quantiteList: newList\n        });\n      }\n    };\n\n    _this.renderOrderTableRows = function (data) {\n      if (!isEmpty(data)) {\n        var rows;\n        rows = data.map(function (item) {\n          return React.createElement(Table.Row, {\n            key: item._id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, React.createElement(Table.Cell, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }, item.nom), React.createElement(Table.Cell, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, item.prixUnite), React.createElement(Table.Cell, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131\n            },\n            __self: this\n          }, item.quantite), React.createElement(Table.Cell, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          }, item.total));\n        });\n        return rows;\n      }\n\n      return;\n    };\n\n    _this.renderDevolutionTableRows = function (data) {\n      if (!isEmpty(data)) {\n        var rows;\n\n        if (_this.state.view) {\n          rows = data.map(function (item) {\n            return React.createElement(Table.Row, {\n              key: item._id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 147\n              },\n              __self: this\n            }, React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 148\n              },\n              __self: this\n            }, item.nom), React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 149\n              },\n              __self: this\n            }, item.prixUnite), React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 150\n              },\n              __self: this\n            }, item.quantite));\n          });\n        } else {\n          rows = data.map(function (item, index) {\n            return React.createElement(Table.Row, {\n              key: item._id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 157\n              },\n              __self: this\n            }, React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            }, item.nom), React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 159\n              },\n              __self: this\n            }, item.prixUnite), React.createElement(Table.Cell, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160\n              },\n              __self: this\n            }, _this.state.quantiteList[index]), React.createElement(Table.Cell, {\n              collapsing: true,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 161\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: styles.cellSpacing,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 162\n              },\n              __self: this\n            }, React.createElement(Button, {\n              icon: \"minus square\",\n              color: \"red\",\n              onClick: function onClick(e) {\n                _this.handleSubstract(e, _this.state.quantiteList[index], index);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 163\n              },\n              __self: this\n            }), React.createElement(Button, {\n              icon: \"plus square\",\n              color: \"green\",\n              onClick: function onClick(e) {\n                _this.handleAdd(e, _this.state.quantiteList[index], index);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 170\n              },\n              __self: this\n            }))));\n          });\n        }\n\n        return rows;\n      }\n\n      return;\n    };\n\n    _this.state = {\n      edit: false || _this.props.edit,\n      view: false || _this.props.view,\n      headerErrorMessage: \"\",\n      contentErrorMessage: \"vous devez retourner au moins un produit\",\n      numero: \"\",\n      client: \"\",\n      orderList: [],\n      devolutionList: [],\n      quantiteList: [],\n      formError: false,\n      isModalOpen: false,\n      isRenderable: false\n    };\n    return _this;\n  }\n\n  _createClass(DevolutionForm, [{\n    key: \"render\",\n    value: function render() {\n      var title = \"Entrain de Ajouter une Devolution\";\n      var label = \"Ajouter\";\n\n      if (this.state.edit) {\n        title = \"Entrain de Modifier le Devolution\";\n        label = \"Modifier\";\n      } else if (this.state.view) {\n        title = \"Entrain de Voir le Devolution\";\n      }\n\n      return React.createElement(Dimmer.Dimmable, {\n        dimmed: this.state.isModalOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(Dimmer, {\n        active: this.state.isModalOpen,\n        page: true,\n        onClickOutside: this.handleModalClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Message, {\n        className: styles.dimmerMargin,\n        negative: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Message.Item, {\n        className: styles.noStyleList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"warning sign\",\n        size: \"huge\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      })), React.createElement(Message.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, this.state.headerErrorMessage), React.createElement(Message.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, this.state.contentErrorMessage))), React.createElement(Card, {\n        fluid: true,\n        centered: true,\n        className: styles.boxContainerWide,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        className: \"font font-18\",\n        textAlign: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, title), React.createElement(\"div\", {\n        className: styles.basicFormContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Form, {\n        className: styles.basicFormWidth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        grouped: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"space-between\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: styles.basicFormSpacing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Num\\xE9ro de Commande\"), React.createElement(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Input, {\n        style: {\n          flex: 3,\n          paddingRight: \"10px\"\n        },\n        disabled: this.state.view,\n        icon: \"hashtag\",\n        iconPosition: \"left\",\n        placeholder: \"Num\\xE9ro de Commande\",\n        name: \"numero\",\n        value: this.state.numero,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(Button, {\n        style: {\n          flex: 1\n        },\n        icon: \"search\",\n        color: \"teal\",\n        onClick: this.handleSearchOrder,\n        content: \"Rechercher\",\n        disabled: this.state.view,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        style: this.state.isRenderable ? {\n          display: \"block\"\n        } : {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: styles.basicTitleSpacing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Produits du Commande #\", this.state.numero), React.createElement(\"div\", {\n        className: styles.basicFormSpacing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Table, {\n        selectable: true,\n        compact: true,\n        celled: true,\n        striped: true,\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Table.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Produit\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Prix per Unite\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Quantite\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Total\"))), React.createElement(Table.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, this.renderOrderTableRows(this.state.orderList)))), React.createElement(\"label\", {\n        className: styles.basicTitleSpacing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Produits \\xE0 Retourner\"), React.createElement(\"div\", {\n        className: styles.basicFormSpacing,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(Table, {\n        selectable: true,\n        compact: true,\n        celled: true,\n        striped: true,\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Table.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"Produit\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Prix per Unite\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Quantite\"), React.createElement(Table.HeaderCell, {\n        style: this.state.view ? {\n          display: \"none\"\n        } : {\n          display: \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(Table.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, this.renderDevolutionTableRows(this.state.devolutionList))))), React.createElement(\"div\", {\n        style: this.state.view || !this.state.isRenderable ? {\n          display: \"none\"\n        } : {\n          display: \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Button, {\n        fluid: true,\n        size: \"small\",\n        color: \"teal\",\n        content: label,\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }))))))));\n    }\n  }]);\n\n  return DevolutionForm;\n}(PureComponent);\n\nfunction mapStateToProps(_ref3) {\n  var devolution = _ref3.devolution,\n      user = _ref3.user;\n  return {\n    devolution: devolution,\n    user: user\n  };\n}\n\nexport default connect(mapStateToProps)(DevolutionForm);","map":{"version":3,"sources":["/Users/sondley/Desktop/PapaRohenson/sudFront/src/components/devolution-form/devolutionform.js"],"names":["React","PureComponent","connect","Form","Input","Button","Message","Dimmer","Icon","Card","Table","getOrderByNumber","createDevolution","modifyDevolution","isEmpty","find","styles","DevolutionForm","props","componentDidMount","state","edit","view","dispatch","data","numero","quantiteList","arrayOrden","map","item","quantite","setState","client","isRenderable","orderList","devolution","printOrder","devolutionList","handleSearchOrder","e","preventDefault","handleChange","event","target","name","value","handleModalClose","isModalOpen","handleSubmit","x","idRealisateur","user","authedUser","_id","index","idproduit","prixUnite","onClose","handleSubstract","newList","handleAdd","renderOrderTableRows","rows","nom","total","renderDevolutionTableRows","cellSpacing","headerErrorMessage","contentErrorMessage","formError","title","label","dimmerMargin","noStyleList","boxContainerWide","basicFormContainer","basicFormWidth","display","flexDirection","justifyContent","basicFormSpacing","flex","paddingRight","basicTitleSpacing","mapStateToProps"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BC,OAA9B,EAAuCC,MAAvC,EAA+CC,IAA/C,EAAqDC,IAArD,EAA2DC,KAA3D,QAAwE,mBAAxE;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,EAA6CC,gBAA7C,QAAqE,gCAArE;AACA,SAASC,OAAT,EAAkBC,IAAlB,QAA8B,QAA9B,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,6BAAnB;;IAEMC,c;;;;;AACL,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,wFAAMA,KAAN;AADkB,UAmBnBC,iBAnBmB;AAAA;AAAA;AAAA;AAAA,6BAmBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACf,MAAKC,KAAL,CAAWC,IAAX,IAAmB,MAAKD,KAAL,CAAWE,IADf;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEZ,MAAKJ,KAAL,CAAWK,QAAX,CAAoBZ,gBAAgB,CAAC,MAAKO,KAAL,CAAWM,IAAX,CAAgBC,MAAjB,CAApC,CAFY;;AAAA;AAGZC,cAAAA,YAHY,GAGG,MAAKR,KAAL,CAAWM,IAAX,CAAgBG,UAAhB,CAA2BC,GAA3B,CAA+B,UAAAC,IAAI,EAAI;AAC3D,uBAAOA,IAAI,CAACC,QAAZ;AACA,eAFoB,CAHH;;AAMlB,oBAAKC,QAAL,CAAc;AACbN,gBAAAA,MAAM,EAAE,MAAKP,KAAL,CAAWM,IAAX,CAAgBC,MADX;AAEbO,gBAAAA,MAAM,EAAE,MAAKd,KAAL,CAAWM,IAAX,CAAgBQ,MAFX;AAGbC,gBAAAA,YAAY,EAAE,IAHD;AAIbC,gBAAAA,SAAS,EAAE,MAAKhB,KAAL,CAAWiB,UAAX,CAAsBC,UAAtB,CAAiCT,UAJ/B;AAKbU,gBAAAA,cAAc,EAAE,MAAKnB,KAAL,CAAWM,IAAX,CAAgBG,UALnB;AAMbD,gBAAAA,YAAY,EAAZA;AANa,eAAd;;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAnBD;;AAAA,UAoCnBY,iBApCmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAoCC,kBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,gBAAAA,CAAC,CAACC,cAAF;AADmB;AAAA,uBAEb,MAAKtB,KAAL,CAAWK,QAAX,CAAoBZ,gBAAgB,CAAC,MAAKS,KAAL,CAAWK,MAAZ,CAApC,CAFa;;AAAA;AAGbS,gBAAAA,SAHa,GAGD,MAAKhB,KAAL,CAAWiB,UAAX,CAAsBC,UAAtB,CAAiCT,UAHhC;AAIbD,gBAAAA,YAJa,GAIEQ,SAAS,CAACN,GAAV,CAAc,YAAM;AACxC,yBAAO,CAAP;AACA,iBAFoB,CAJF;;AAOnB,sBAAKG,QAAL,CAAc;AACbE,kBAAAA,YAAY,EAAE,IADD;AAEbC,kBAAAA,SAAS,EAATA,SAFa;AAGbG,kBAAAA,cAAc,EAAEH,SAHH;AAIbR,kBAAAA,YAAY,EAAZA,YAJa;AAKbM,kBAAAA,MAAM,EAAE,MAAKd,KAAL,CAAWiB,UAAX,CAAsBC,UAAtB,CAAiCJ;AAL5B,iBAAd;;AAPmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OApCD;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAoDnBS,YApDmB,GAoDJ,UAAAC,KAAK,EAAI;AACvBA,MAAAA,KAAK,CAACF,cAAN;AADuB,0BAECE,KAAK,CAACC,MAFP;AAAA,UAEfC,IAFe,iBAEfA,IAFe;AAAA,UAETC,KAFS,iBAETA,KAFS;;AAGvB,YAAKd,QAAL,qBAAiBa,IAAjB,EAAwBC,KAAxB;AACA,KAxDkB;;AAAA,UA0DnBC,gBA1DmB,GA0DA,YAAM;AACxB,YAAKf,QAAL,CAAc;AAAEgB,QAAAA,WAAW,EAAE;AAAf,OAAd;AACA,KA5DkB;;AAAA,UA8DnBC,YA9DmB,GA8DJ,UAAAN,KAAK,EAAI;AACvBA,MAAAA,KAAK,CAACF,cAAN;AADuB,wBAEkB,MAAKpB,KAFvB;AAAA,UAEfiB,cAFe,eAEfA,cAFe;AAAA,UAECX,YAFD,eAECA,YAFD;;AAGvB,UACCX,IAAI,CAACW,YAAD,EAAe,UAAAuB,CAAC,EAAI;AACvB,eAAOA,CAAC,KAAK,CAAb;AACA,OAFG,CADL,EAIE;AACD,YAAI,MAAK7B,KAAL,CAAWC,IAAf,EAAqB;AACpB,cAAMc,WAAU,qBACZ,MAAKjB,KAAL,CAAWM,IADC;AAEf0B,YAAAA,aAAa,EAAE,MAAKhC,KAAL,CAAWiC,IAAX,CAAgBC,UAAhB,CAA2BC,GAF3B;AAGf1B,YAAAA,UAAU,EAAEU,cAAc,CAACT,GAAf,CAAmB,UAACC,IAAD,EAAOyB,KAAP,EAAiB;AAC/C,qBAAO;AAAEC,gBAAAA,SAAS,EAAE1B,IAAI,CAAC0B,SAAlB;AAA6BC,gBAAAA,SAAS,EAAE3B,IAAI,CAAC2B,SAA7C;AAAwD1B,gBAAAA,QAAQ,EAAEJ,YAAY,CAAC4B,KAAD;AAA9E,eAAP;AACA,aAFW;AAHG,YAAhB;;AAOA,iBAAO,MAAKpC,KAAL,CAAWK,QAAX,CAAoBV,gBAAgB,CAACsB,WAAD,EAAa,MAAKjB,KAAL,CAAWuC,OAAxB,CAApC,CAAP;AACA;;AACD,YAAMtB,UAAU,GAAG;AAClBV,UAAAA,MAAM,EAAE,MAAKL,KAAL,CAAWK,MADD;AAElByB,UAAAA,aAAa,EAAE,MAAKhC,KAAL,CAAWiC,IAAX,CAAgBC,UAAhB,CAA2BC,GAFxB;AAGlBrB,UAAAA,MAAM,EAAE,MAAKZ,KAAL,CAAWY,MAHD;AAIlBL,UAAAA,UAAU,EAAEU,cAAc,CAACT,GAAf,CAAmB,UAACC,IAAD,EAAOyB,KAAP,EAAiB;AAC/C,mBAAO;AAAEC,cAAAA,SAAS,EAAE1B,IAAI,CAAC0B,SAAlB;AAA6BC,cAAAA,SAAS,EAAE3B,IAAI,CAAC2B,SAA7C;AAAwD1B,cAAAA,QAAQ,EAAEJ,YAAY,CAAC4B,KAAD;AAA9E,aAAP;AACA,WAFW;AAJM,SAAnB;;AAQA,cAAKpC,KAAL,CAAWK,QAAX,CAAoBX,gBAAgB,CAACuB,UAAD,EAAa,MAAKjB,KAAL,CAAWuC,OAAxB,CAApC;AACA,OAxBD,MAwBO;AACN,cAAK1B,QAAL,CAAc;AAAEgB,UAAAA,WAAW,EAAE;AAAf,SAAd;AACA;AACD,KA5FkB;;AAAA,UA8FnBW,eA9FmB,GA8FD,UAACnB,CAAD,EAAIM,KAAJ,EAAWS,KAAX,EAAqB;AACtCf,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAImB,OAAO,sBAAO,MAAKvC,KAAL,CAAWM,YAAlB,CAAX;;AACA,UAAIiC,OAAO,CAACL,KAAD,CAAP,GAAiB,CAArB,EAAwB;AACvBK,QAAAA,OAAO,CAACL,KAAD,CAAP,GAAiBT,KAAK,GAAG,CAAzB;;AACA,cAAKd,QAAL,CAAc;AAAEL,UAAAA,YAAY,EAAEiC;AAAhB,SAAd;AACA;AACD,KArGkB;;AAAA,UAuGnBC,SAvGmB,GAuGP,UAACrB,CAAD,EAAIM,KAAJ,EAAWS,KAAX,EAAqB;AAChCf,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAImB,OAAO,sBAAO,MAAKvC,KAAL,CAAWM,YAAlB,CAAX;;AACA,UAAIiC,OAAO,CAACL,KAAD,CAAP,GAAiB,MAAKlC,KAAL,CAAWc,SAAX,CAAqBoB,KAArB,EAA4BxB,QAAjD,EAA2D;AAC1D6B,QAAAA,OAAO,CAACL,KAAD,CAAP,GAAiBT,KAAK,GAAG,CAAzB;;AACA,cAAKd,QAAL,CAAc;AAAEL,UAAAA,YAAY,EAAEiC;AAAhB,SAAd;AACA;AACD,KA9GkB;;AAAA,UAgHnBE,oBAhHmB,GAgHI,UAAArC,IAAI,EAAI;AAC9B,UAAI,CAACV,OAAO,CAACU,IAAD,CAAZ,EAAoB;AACnB,YAAIsC,IAAJ;AACAA,QAAAA,IAAI,GAAGtC,IAAI,CAACI,GAAL,CAAS,UAAAC,IAAI,EAAI;AACvB,iBACC,oBAAC,KAAD,CAAO,GAAP;AAAW,YAAA,GAAG,EAAEA,IAAI,CAACwB,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAaxB,IAAI,CAACkC,GAAlB,CADD,EAEC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAalC,IAAI,CAAC2B,SAAlB,CAFD,EAGC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAa3B,IAAI,CAACC,QAAlB,CAHD,EAIC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAaD,IAAI,CAACmC,KAAlB,CAJD,CADD;AAQA,SATM,CAAP;AAUA,eAAOF,IAAP;AACA;;AACD;AACA,KAhIkB;;AAAA,UAkInBG,yBAlImB,GAkIS,UAAAzC,IAAI,EAAI;AACnC,UAAI,CAACV,OAAO,CAACU,IAAD,CAAZ,EAAoB;AACnB,YAAIsC,IAAJ;;AACA,YAAI,MAAK1C,KAAL,CAAWE,IAAf,EAAqB;AACpBwC,UAAAA,IAAI,GAAGtC,IAAI,CAACI,GAAL,CAAS,UAAAC,IAAI,EAAI;AACvB,mBACC,oBAAC,KAAD,CAAO,GAAP;AAAW,cAAA,GAAG,EAAEA,IAAI,CAACwB,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaxB,IAAI,CAACkC,GAAlB,CADD,EAEC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAalC,IAAI,CAAC2B,SAAlB,CAFD,EAGC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAa3B,IAAI,CAACC,QAAlB,CAHD,CADD;AAOA,WARM,CAAP;AASA,SAVD,MAUO;AACNgC,UAAAA,IAAI,GAAGtC,IAAI,CAACI,GAAL,CAAS,UAACC,IAAD,EAAOyB,KAAP,EAAiB;AAChC,mBACC,oBAAC,KAAD,CAAO,GAAP;AAAW,cAAA,GAAG,EAAEzB,IAAI,CAACwB,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaxB,IAAI,CAACkC,GAAlB,CADD,EAEC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAalC,IAAI,CAAC2B,SAAlB,CAFD,EAGC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAa,MAAKpC,KAAL,CAAWM,YAAX,CAAwB4B,KAAxB,CAAb,CAHD,EAIC,oBAAC,KAAD,CAAO,IAAP;AAAY,cAAA,UAAU,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACC;AAAK,cAAA,SAAS,EAAEtC,MAAM,CAACkD,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACC,oBAAC,MAAD;AACC,cAAA,IAAI,EAAC,cADN;AAEC,cAAA,KAAK,EAAC,KAFP;AAGC,cAAA,OAAO,EAAE,iBAAA3B,CAAC,EAAI;AACb,sBAAKmB,eAAL,CAAqBnB,CAArB,EAAwB,MAAKnB,KAAL,CAAWM,YAAX,CAAwB4B,KAAxB,CAAxB,EAAwDA,KAAxD;AACA,eALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,EAQC,oBAAC,MAAD;AACC,cAAA,IAAI,EAAC,aADN;AAEC,cAAA,KAAK,EAAC,OAFP;AAGC,cAAA,OAAO,EAAE,iBAAAf,CAAC,EAAI;AACb,sBAAKqB,SAAL,CAAerB,CAAf,EAAkB,MAAKnB,KAAL,CAAWM,YAAX,CAAwB4B,KAAxB,CAAlB,EAAkDA,KAAlD;AACA,eALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARD,CADD,CAJD,CADD;AAyBA,WA1BM,CAAP;AA2BA;;AACD,eAAOQ,IAAP;AACA;;AACD;AACA,KA/KkB;;AAGlB,UAAK1C,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,SAAS,MAAKH,KAAL,CAAWG,IADd;AAEZC,MAAAA,IAAI,EAAE,SAAS,MAAKJ,KAAL,CAAWI,IAFd;AAGZ6C,MAAAA,kBAAkB,EAAE,EAHR;AAIZC,MAAAA,mBAAmB,EAAE,0CAJT;AAKZ3C,MAAAA,MAAM,EAAE,EALI;AAMZO,MAAAA,MAAM,EAAE,EANI;AAOZE,MAAAA,SAAS,EAAE,EAPC;AAQZG,MAAAA,cAAc,EAAE,EARJ;AASZX,MAAAA,YAAY,EAAE,EATF;AAUZ2C,MAAAA,SAAS,EAAE,KAVC;AAWZtB,MAAAA,WAAW,EAAE,KAXD;AAYZd,MAAAA,YAAY,EAAE;AAZF,KAAb;AAHkB;AAiBlB;;;;6BAgKQ;AACR,UAAIqC,KAAK,GAAG,mCAAZ;AACA,UAAIC,KAAK,GAAG,SAAZ;;AACA,UAAI,KAAKnD,KAAL,CAAWC,IAAf,EAAqB;AACpBiD,QAAAA,KAAK,GAAG,mCAAR;AACAC,QAAAA,KAAK,GAAG,UAAR;AACA,OAHD,MAGO,IAAI,KAAKnD,KAAL,CAAWE,IAAf,EAAqB;AAC3BgD,QAAAA,KAAK,GAAG,+BAAR;AACA;;AAED,aACC,oBAAC,MAAD,CAAQ,QAAR;AAAiB,QAAA,MAAM,EAAE,KAAKlD,KAAL,CAAW2B,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,MAAD;AAAQ,QAAA,MAAM,EAAE,KAAK3B,KAAL,CAAW2B,WAA3B;AAAwC,QAAA,IAAI,MAA5C;AAA6C,QAAA,cAAc,EAAE,KAAKD,gBAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAE9B,MAAM,CAACwD,YAA3B;AAAyC,QAAA,QAAQ,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,OAAD,CAAS,IAAT;AAAc,QAAA,SAAS,EAAExD,MAAM,CAACyD,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,cAAX;AAA0B,QAAA,IAAI,EAAC,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CADD,EAIC,oBAAC,OAAD,CAAS,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiB,KAAKrD,KAAL,CAAW+C,kBAA5B,CAJD,EAKC,oBAAC,OAAD,CAAS,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkB,KAAK/C,KAAL,CAAWgD,mBAA7B,CALD,CADD,CADD,EAUC,oBAAC,IAAD;AAAM,QAAA,KAAK,MAAX;AAAY,QAAA,QAAQ,MAApB;AAAqB,QAAA,SAAS,EAAEpD,MAAM,CAAC0D,gBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD,CAAM,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,SAAS,EAAC,cAAvB;AAAsC,QAAA,SAAS,EAAC,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEJ,KADF,CADD,EAIC;AAAK,QAAA,SAAS,EAAEtD,MAAM,CAAC2D,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAE3D,MAAM,CAAC4D,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD,CAAM,KAAN;AAAY,QAAA,OAAO,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD,CAAM,KAAN;AAAY,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE,MAAX;AAAmBC,UAAAA,aAAa,EAAE,QAAlC;AAA4CC,UAAAA,cAAc,EAAE;AAA5D,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAO,QAAA,SAAS,EAAE/D,MAAM,CAACgE,gBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADD,EAEC;AAAK,QAAA,KAAK,EAAE;AAAEH,UAAAA,OAAO,EAAE;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD;AACC,QAAA,KAAK,EAAE;AAAEI,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,YAAY,EAAE;AAAzB,SADR;AAEC,QAAA,QAAQ,EAAE,KAAK9D,KAAL,CAAWE,IAFtB;AAGC,QAAA,IAAI,EAAC,SAHN;AAIC,QAAA,YAAY,EAAC,MAJd;AAKC,QAAA,WAAW,EAAC,uBALb;AAMC,QAAA,IAAI,EAAC,QANN;AAOC,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWK,MAPnB;AAQC,QAAA,QAAQ,EAAE,KAAKgB,YARhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,EAWC,oBAAC,MAAD;AACC,QAAA,KAAK,EAAE;AAAEwC,UAAAA,IAAI,EAAE;AAAR,SADR;AAEC,QAAA,IAAI,EAAC,QAFN;AAGC,QAAA,KAAK,EAAC,MAHP;AAIC,QAAA,OAAO,EAAE,KAAK3C,iBAJf;AAKC,QAAA,OAAO,EAAC,YALT;AAMC,QAAA,QAAQ,EAAE,KAAKlB,KAAL,CAAWE,IANtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXD,CAFD,CADD,EAwBC;AAAK,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWa,YAAX,GAA0B;AAAE4C,UAAAA,OAAO,EAAE;AAAX,SAA1B,GAAiD;AAAEA,UAAAA,OAAO,EAAE;AAAX,SAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAO,QAAA,SAAS,EAAE7D,MAAM,CAACmE,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAmE,KAAK/D,KAAL,CAAWK,MAA9E,CADD,EAEC;AAAK,QAAA,SAAS,EAAET,MAAM,CAACgE,gBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD;AAAO,QAAA,UAAU,MAAjB;AAAkB,QAAA,OAAO,MAAzB;AAA0B,QAAA,MAAM,MAAhC;AAAiC,QAAA,OAAO,MAAxC;AAAyC,QAAA,IAAI,EAAC,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,EAEC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFD,EAGC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHD,EAIC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJD,CADD,CADD,EASC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAa,KAAKnB,oBAAL,CAA0B,KAAKzC,KAAL,CAAWc,SAArC,CAAb,CATD,CADD,CAFD,EAeC;AAAO,QAAA,SAAS,EAAElB,MAAM,CAACmE,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAfD,EAgBC;AAAK,QAAA,SAAS,EAAEnE,MAAM,CAACgE,gBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD;AAAO,QAAA,UAAU,MAAjB;AAAkB,QAAA,OAAO,MAAzB;AAA0B,QAAA,MAAM,MAAhC;AAAiC,QAAA,OAAO,MAAxC;AAAyC,QAAA,IAAI,EAAC,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,EAEC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFD,EAGC,oBAAC,KAAD,CAAO,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHD,EAIC,oBAAC,KAAD,CAAO,UAAP;AAAkB,QAAA,KAAK,EAAE,KAAK5D,KAAL,CAAWE,IAAX,GAAkB;AAAEuD,UAAAA,OAAO,EAAE;AAAX,SAAlB,GAAwC;AAAEA,UAAAA,OAAO,EAAE;AAAX,SAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJD,CADD,CADD,EAWC,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAa,KAAKZ,yBAAL,CAA+B,KAAK7C,KAAL,CAAWiB,cAA1C,CAAb,CAXD,CADD,CAhBD,CAxBD,EAwDC;AAAK,QAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWE,IAAX,IAAmB,CAAC,KAAKF,KAAL,CAAWa,YAA/B,GAA8C;AAAE4C,UAAAA,OAAO,EAAE;AAAX,SAA9C,GAAoE;AAAEA,UAAAA,OAAO,EAAE;AAAX,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,MAAD;AAAQ,QAAA,KAAK,MAAb;AAAc,QAAA,IAAI,EAAC,OAAnB;AAA2B,QAAA,KAAK,EAAC,MAAjC;AAAwC,QAAA,OAAO,EAAEN,KAAjD;AAAwD,QAAA,OAAO,EAAE,KAAKvB,YAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CAxDD,CADD,CADD,CAJD,CADD,CAVD,CADD;AAoFA;;;;EAhR2B/C,a;;AAmR7B,SAASmF,eAAT,QAA+C;AAAA,MAApBjD,UAAoB,SAApBA,UAAoB;AAAA,MAARgB,IAAQ,SAARA,IAAQ;AAC9C,SAAO;AAAEhB,IAAAA,UAAU,EAAVA,UAAF;AAAcgB,IAAAA,IAAI,EAAJA;AAAd,GAAP;AACA;;AAED,eAAejD,OAAO,CAACkF,eAAD,CAAP,CAAyBnE,cAAzB,CAAf","sourcesContent":["import React, { PureComponent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Input, Button, Message, Dimmer, Icon, Card, Table } from \"semantic-ui-react\";\nimport { getOrderByNumber, createDevolution, modifyDevolution } from \"../../redux/actions/devolution\";\nimport { isEmpty, find } from \"lodash\";\n\n//Styles\nimport styles from \"./devolutionform.module.css\";\n\nclass DevolutionForm extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tedit: false || this.props.edit,\n\t\t\tview: false || this.props.view,\n\t\t\theaderErrorMessage: \"\",\n\t\t\tcontentErrorMessage: \"vous devez retourner au moins un produit\",\n\t\t\tnumero: \"\",\n\t\t\tclient: \"\",\n\t\t\torderList: [],\n\t\t\tdevolutionList: [],\n\t\t\tquantiteList: [],\n\t\t\tformError: false,\n\t\t\tisModalOpen: false,\n\t\t\tisRenderable: false\n\t\t};\n\t}\n\n\tcomponentDidMount = async () => {\n\t\tif (this.state.edit || this.state.view) {\n\t\t\tawait this.props.dispatch(getOrderByNumber(this.props.data.numero));\n\t\t\tconst quantiteList = this.props.data.arrayOrden.map(item => {\n\t\t\t\treturn item.quantite;\n\t\t\t});\n\t\t\tthis.setState({\n\t\t\t\tnumero: this.props.data.numero,\n\t\t\t\tclient: this.props.data.client,\n\t\t\t\tisRenderable: true,\n\t\t\t\torderList: this.props.devolution.printOrder.arrayOrden,\n\t\t\t\tdevolutionList: this.props.data.arrayOrden,\n\t\t\t\tquantiteList\n\t\t\t});\n\t\t}\n\t};\n\n\thandleSearchOrder = async e => {\n\t\te.preventDefault();\n\t\tawait this.props.dispatch(getOrderByNumber(this.state.numero));\n\t\tconst orderList = this.props.devolution.printOrder.arrayOrden;\n\t\tconst quantiteList = orderList.map(() => {\n\t\t\treturn 0;\n\t\t});\n\t\tthis.setState({\n\t\t\tisRenderable: true,\n\t\t\torderList,\n\t\t\tdevolutionList: orderList,\n\t\t\tquantiteList,\n\t\t\tclient: this.props.devolution.printOrder.client\n\t\t});\n\t};\n\n\thandleChange = event => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target;\n\t\tthis.setState({ [name]: value });\n\t};\n\n\thandleModalClose = () => {\n\t\tthis.setState({ isModalOpen: false });\n\t};\n\n\thandleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tconst { devolutionList, quantiteList } = this.state;\n\t\tif (\n\t\t\tfind(quantiteList, x => {\n\t\t\t\treturn x !== 0;\n\t\t\t})\n\t\t) {\n\t\t\tif (this.state.edit) {\n\t\t\t\tconst devolution = {\n\t\t\t\t\t...this.props.data,\n\t\t\t\t\tidRealisateur: this.props.user.authedUser._id,\n\t\t\t\t\tarrayOrden: devolutionList.map((item, index) => {\n\t\t\t\t\t\treturn { idproduit: item.idproduit, prixUnite: item.prixUnite, quantite: quantiteList[index] };\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\treturn this.props.dispatch(modifyDevolution(devolution, this.props.onClose));\n\t\t\t}\n\t\t\tconst devolution = {\n\t\t\t\tnumero: this.state.numero,\n\t\t\t\tidRealisateur: this.props.user.authedUser._id,\n\t\t\t\tclient: this.state.client,\n\t\t\t\tarrayOrden: devolutionList.map((item, index) => {\n\t\t\t\t\treturn { idproduit: item.idproduit, prixUnite: item.prixUnite, quantite: quantiteList[index] };\n\t\t\t\t})\n\t\t\t};\n\t\t\tthis.props.dispatch(createDevolution(devolution, this.props.onClose));\n\t\t} else {\n\t\t\tthis.setState({ isModalOpen: true });\n\t\t}\n\t};\n\n\thandleSubstract = (e, value, index) => {\n\t\te.preventDefault();\n\t\tlet newList = [...this.state.quantiteList];\n\t\tif (newList[index] > 0) {\n\t\t\tnewList[index] = value - 1;\n\t\t\tthis.setState({ quantiteList: newList });\n\t\t}\n\t};\n\n\thandleAdd = (e, value, index) => {\n\t\te.preventDefault();\n\t\tlet newList = [...this.state.quantiteList];\n\t\tif (newList[index] < this.state.orderList[index].quantite) {\n\t\t\tnewList[index] = value + 1;\n\t\t\tthis.setState({ quantiteList: newList });\n\t\t}\n\t};\n\n\trenderOrderTableRows = data => {\n\t\tif (!isEmpty(data)) {\n\t\t\tlet rows;\n\t\t\trows = data.map(item => {\n\t\t\t\treturn (\n\t\t\t\t\t<Table.Row key={item._id}>\n\t\t\t\t\t\t<Table.Cell>{item.nom}</Table.Cell>\n\t\t\t\t\t\t<Table.Cell>{item.prixUnite}</Table.Cell>\n\t\t\t\t\t\t<Table.Cell>{item.quantite}</Table.Cell>\n\t\t\t\t\t\t<Table.Cell>{item.total}</Table.Cell>\n\t\t\t\t\t</Table.Row>\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn rows;\n\t\t}\n\t\treturn;\n\t};\n\n\trenderDevolutionTableRows = data => {\n\t\tif (!isEmpty(data)) {\n\t\t\tlet rows;\n\t\t\tif (this.state.view) {\n\t\t\t\trows = data.map(item => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Table.Row key={item._id}>\n\t\t\t\t\t\t\t<Table.Cell>{item.nom}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{item.prixUnite}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{item.quantite}</Table.Cell>\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trows = data.map((item, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Table.Row key={item._id}>\n\t\t\t\t\t\t\t<Table.Cell>{item.nom}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{item.prixUnite}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{this.state.quantiteList[index]}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell collapsing>\n\t\t\t\t\t\t\t\t<div className={styles.cellSpacing}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ticon=\"minus square\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\t\t\t\tthis.handleSubstract(e, this.state.quantiteList[index], index);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ticon=\"plus square\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\t\t\t\tthis.handleAdd(e, this.state.quantiteList[index], index);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn rows;\n\t\t}\n\t\treturn;\n\t};\n\n\trender() {\n\t\tlet title = \"Entrain de Ajouter une Devolution\";\n\t\tlet label = \"Ajouter\";\n\t\tif (this.state.edit) {\n\t\t\ttitle = \"Entrain de Modifier le Devolution\";\n\t\t\tlabel = \"Modifier\";\n\t\t} else if (this.state.view) {\n\t\t\ttitle = \"Entrain de Voir le Devolution\";\n\t\t}\n\n\t\treturn (\n\t\t\t<Dimmer.Dimmable dimmed={this.state.isModalOpen}>\n\t\t\t\t<Dimmer active={this.state.isModalOpen} page onClickOutside={this.handleModalClose}>\n\t\t\t\t\t<Message className={styles.dimmerMargin} negative>\n\t\t\t\t\t\t<Message.Item className={styles.noStyleList}>\n\t\t\t\t\t\t\t<Icon name=\"warning sign\" size=\"huge\" />\n\t\t\t\t\t\t</Message.Item>\n\t\t\t\t\t\t<Message.Header>{this.state.headerErrorMessage}</Message.Header>\n\t\t\t\t\t\t<Message.Content>{this.state.contentErrorMessage}</Message.Content>\n\t\t\t\t\t</Message>\n\t\t\t\t</Dimmer>\n\t\t\t\t<Card fluid centered className={styles.boxContainerWide}>\n\t\t\t\t\t<Card.Content>\n\t\t\t\t\t\t<Card.Header className=\"font font-18\" textAlign=\"center\">\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</Card.Header>\n\t\t\t\t\t\t<div className={styles.basicFormContainer}>\n\t\t\t\t\t\t\t<Form className={styles.basicFormWidth}>\n\t\t\t\t\t\t\t\t<Form.Group grouped>\n\t\t\t\t\t\t\t\t\t<Form.Field style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"space-between\" }}>\n\t\t\t\t\t\t\t\t\t\t<label className={styles.basicFormSpacing}>Numéro de Commande</label>\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 3, paddingRight: \"10px\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={this.state.view}\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"hashtag\"\n\t\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Numéro de Commande\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"numero\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.numero}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1 }}\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"search\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"teal\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleSearchOrder}\n\t\t\t\t\t\t\t\t\t\t\t\tcontent=\"Rechercher\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={this.state.view}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Form.Field>\n\t\t\t\t\t\t\t\t\t<div style={this.state.isRenderable ? { display: \"block\" } : { display: \"none\" }}>\n\t\t\t\t\t\t\t\t\t\t<label className={styles.basicTitleSpacing}>Produits du Commande #{this.state.numero}</label>\n\t\t\t\t\t\t\t\t\t\t<div className={styles.basicFormSpacing}>\n\t\t\t\t\t\t\t\t\t\t\t<Table selectable compact celled striped size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Produit</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Prix per Unite</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Quantite</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Total</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Body>{this.renderOrderTableRows(this.state.orderList)}</Table.Body>\n\t\t\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<label className={styles.basicTitleSpacing}>Produits à Retourner</label>\n\t\t\t\t\t\t\t\t\t\t<div className={styles.basicFormSpacing}>\n\t\t\t\t\t\t\t\t\t\t\t<Table selectable compact celled striped size=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Produit</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Prix per Unite</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Quantite</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell style={this.state.view ? { display: \"none\" } : { display: \"block\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tActions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Body>{this.renderDevolutionTableRows(this.state.devolutionList)}</Table.Body>\n\t\t\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={this.state.view || !this.state.isRenderable ? { display: \"none\" } : { display: \"block\" }}>\n\t\t\t\t\t\t\t\t\t\t<Button fluid size=\"small\" color=\"teal\" content={label} onClick={this.handleSubmit} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card.Content>\n\t\t\t\t</Card>\n\t\t\t</Dimmer.Dimmable>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps({ devolution, user }) {\n\treturn { devolution, user };\n}\n\nexport default connect(mapStateToProps)(DevolutionForm);\n"]},"metadata":{},"sourceType":"module"}